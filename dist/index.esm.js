import e,{Service as n}from"protobufjs";var r={double:"number",float:"number",int32:"number",int64:"number",uint32:"number",uint64:"number",sint32:"number",sint64:"number",fixed32:"number",fixed64:"number",sfixed32:"number",sfixed64:"number",bool:"boolean",string:"string",bytes:"string"},t="google.protobuf.Empty";function u(r){var t,u,a=e.parse(r,{keepCase:!0,alternateCommentMode:!0});return u=(t=a.package?a.root.lookup(a.package):a.root).nestedArray.find(function(e){return e instanceof n}),t.lookupService(u.name).methods}function a(e){switch(e){case"string":return"Hello";case"number":return 10;case"bool":return!0;case"int32":return 10;case"int64":return 20;case"uint32":case"uint64":case"sint32":return 100;case"sint64":return 1200;case"fixed32":return 1400;case"fixed64":return 1500;case"sfixed32":return 1600;case"sfixed64":return 1700;case"double":return 1.4;case"float":return 1.1;case"bytes":return new Buffer("Hello");default:return null}}function o(r,t){var u=e.parse(r,{keepCase:!0,alternateCommentMode:!0});return function(e,r){var t=e.nestedArray.find(function(e){return e instanceof n}),u=e.lookupService(t.name);return function e(n,r){return n.lookupType(r).fieldsArray.reduce(function(r,t){var u,o,s,i;if("repeated"===t.rule){var c=a(t.type),p=c?((u={})[t.name]=[c],u):((o={})[t.name]=[e(n,t.type)],o);return Object.assign({},r,p)}var m=a(t.type),f=m?((s={})[t.name]=m,s):((i={})[t.name]=e(n,t.type),i);return Object.assign({},r,f)},{})}(e,u.methods[r].responseType)}(u.package?u.root.lookup(u.package):u.root,t)}function s(e){var n=e.nested;return n?Object.keys(n).map(function(e){var u=n[e];return Object.keys(u).map(function(n){return"fields"===n?function(e,n){var t=function(e,n){return{category:"fields",name:e,params:Object.keys(n).map(function(e){var t,u=n[e];return{type:r[u.type]||u.type,keyType:(t=u,t.keyType?r[t.keyType]||t.keyType:""),name:e,rule:u.rule,id:u.id}}).sort(function(e,n){return e.id-n.id})}}(e,n.fields),u=t.params.map(function(e){return"repeated"===e.rule?"  "+e.name+": "+e.type+"[];\n":e.keyType?"  "+e.name+": {[key: "+e.keyType+"]: "+e.type+"};\n":"  "+e.name+": "+e.type+";\n"});return n.nested&&Object.keys(n.nested).forEach(function(e){u.push("  "+e+": "+e+";\n")}),"interface "+t.name+" {\n"+u.join("")+"}\n\n"}(e,u):"methods"===n?function(e,n){return""+function(e,n){return{category:"methods",name:e,params:Object.keys(n).map(function(e){return Object.assign({},{name:e},n[e])})}}(e,u.methods).params.map(function(e){return"interface "+e.name+" {\n  ("+(e.requestType===t?"":"params: "+e.requestType)+"): Promise<"+(e.responseType===t?"{}":e.responseType)+">;\n}\n\n"}).join("")}(e):"values"===n?function(e,n){var r=u.values;return"enum "+e+" {\n"+Object.keys(r).map(function(e){return{name:e,id:r[e]}}).sort(function(e,n){return e.id-n.id}).map(function(e){return"  "+e.name+" = "+e.id+",\n"}).join("")+"}\n\n"}(e):"nested"===n?s(u):void 0})}).reduce(function(e,n){return e.concat(n)},[]).join(""):""}function i(n){var r=e.parse(n,{keepCase:!0});return s(r.package?r.root.lookup(r.package).toJSON():r.root.toJSON())}export default{parseProto:i,getAllMethods:u,mockResponse:o};export{s as printTypescript,i as parseProto,u as getAllMethods,o as mockResponse};
//# sourceMappingURL=index.esm.js.map
